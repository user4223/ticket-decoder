PROJECT(ticket-decoder-uic918-u_flex30)

AUX_SOURCE_DIRECTORY("source" PROJECT_SOURCE)
AUX_SOURCE_DIRECTORY("../source" PROJECT_SOURCE)
FILE(GLOB GEN_SOURCE_DIRECTORY "gen/*.c")
FILE(GLOB PROJECT_INCLUDES "include/*.h")

add_compile_options($<$<COMPILE_LANGUAGE:C>:-D_DEFAULT_SOURCE>)

ADD_LIBRARY(${PROJECT_NAME} SHARED ${PROJECT_SOURCE} ${PROJECT_INCLUDES} ${GEN_SOURCE_DIRECTORY})
SET_TARGET_PROPERTIES(${PROJECT_NAME} PROPERTIES
   C_VISIBILITY_PRESET hidden
   CXX_VISIBILITY_PRESET hidden
   VISIBILITY_INLINES_HIDDEN ON)
target_include_directories(${PROJECT_NAME} PRIVATE "${PROJECT_SOURCE_DIR}/gen")
target_link_libraries(${PROJECT_NAME} PRIVATE 
   nlohmann_json::nlohmann_json
   easyloggingpp::easyloggingpp
   ticket-decoder-utility)
